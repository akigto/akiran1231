!function(){"use strict";class e{set(e,t){"localStorage"in window&&null!==window.localStorage&&localStorage.setItem(e,t)}get(e){return"localStorage"in window&&null!==window.localStorage?localStorage.getItem(e):null}delete(e){"localStorage"in window&&null!==window.localStorage&&localStorage.removeItem(e)}keyExists(e){return"localStorage"in window&&null!==window.localStorage&&localStorage.hasOwnProperty(e)}setLocalStorage=(e,t)=>{"localStorage"in window&&null!==window.localStorage&&(t?localStorage.setItem(e,t):localStorage.removeItem(e))}}class t{SHOW_PREOPTIN="coins.preoptin.shown";CLICK_PREOPTIN_ACTION="coins.preoptin.click";CLICK_PREOPTIN_CLOSE="coins.preoptin.close";AUTO_BLOCK="coins.permission.auto_block";publish(e,t){t=t||{};const n=new CustomEvent(e,t);window.dispatchEvent(n)}dispPromptRidSp=()=>{let e=0,t=0;document.addEventListener("touchend",(n=>{const i=Date.now();i-t<200?e++:e=1,10===e&&(window.coins2b.getcoinsid((e=>{window.prompt("",e)})),e=0),t=i}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const n=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const o=e[t],s=t+1<e.length,r=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=o>>2,d=(3&o)<<4|r>>4;let u=(15&r)<<2|c>>6,p=63&c;a||(p=64,s||(u=64)),i.push(n[l],n[d],n[u],n[p])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const o=e[n++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=e[n++];t[i++]=String.fromCharCode((31&o)<<6|63&s)}else if(o>239&&o<365){const s=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],r=e[n++];t[i++]=String.fromCharCode((15&o)<<12|(63&s)<<6|63&r)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==a||null==c)throw new o;const l=s<<2|r>>4;if(i.push(l),64!==a){const e=r<<4&240|a>>2;if(i.push(e),64!==c){const e=a<<6&192|c;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const t=n(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const r=()=>
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,a=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)},c=()=>{try{return r()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||a()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function u(){try{return"object"==typeof indexedDB}catch(e){return!1}}function p(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class g extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function(e,t){return e.replace(f,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(o,n):"Error",r=`${this.serviceName}: ${s} (${i}).`;return new g(i,r,n)}}const f=/\{\$([^}]+)}/g;function m(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const o of n){if(!i.includes(o))return!1;const n=e[o],s=t[o];if(b(n)&&b(s)){if(!m(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function b(e){return null!==e&&"object"==typeof e}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function w(e){return e&&e._delegate?e._delegate:e}class v{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const y="[DEFAULT]";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new d;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e))try{this.getOrInitializeService({instanceIdentifier:y})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=y){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=y){return this.instances.has(e)}getOptions(e=y){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===y?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=y){return this.component?this.component.multipleInstances?e:y:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class k{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var S;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(S||(S={}));const I={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},_=S.INFO,C={[S.DEBUG]:"log",[S.VERBOSE]:"log",[S.INFO]:"info",[S.WARN]:"warn",[S.ERROR]:"error"},E=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),o=C[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${i}]  ${e.name}:`,...n)};const O=(e,t)=>t.some((t=>e instanceof t));let T,P;const L=new WeakMap,x=new WeakMap,A=new WeakMap,B=new WeakMap,N=new WeakMap;let j={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return x.get(e);if("objectStoreNames"===t)return e.objectStoreNames||A.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return U(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function R(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(P||(P=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply($(this),t),U(L.get(this))}:function(...t){return U(e.apply($(this),t))}:function(t,...n){const i=e.call($(this),t,...n);return A.set(i,t.sort?t.sort():[t]),U(i)}}function M(e){return"function"==typeof e?R(e):(e instanceof IDBTransaction&&function(e){if(x.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));x.set(e,t)}(e),O(e,T||(T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,j):e)}function U(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(U(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&L.set(t,e)})).catch((()=>{})),N.set(t,e),t}(e);if(B.has(e))return B.get(e);const t=M(e);return t!==e&&(B.set(e,t),N.set(t,e)),t}const $=e=>N.get(e);const H=["get","getKey","getAll","getAllKeys","count"],F=["put","add","delete","clear"],q=new Map;function K(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(q.get(t))return q.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=F.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!H.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let r=s.store;return i&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),o&&s.done]))[0]};return q.set(t,s),s}j=(e=>({...e,get:(t,n,i)=>K(t,n)||e.get(t,n,i),has:(t,n)=>!!K(t,n)||e.has(t,n)}))(j);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const W="@firebase/app",z="0.9.15",G=new class{constructor(e){this.name=e,this._logLevel=_,this._logHandler=E,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in S))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?I[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,S.DEBUG,...e),this._logHandler(this,S.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,S.VERBOSE,...e),this._logHandler(this,S.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,S.INFO,...e),this._logHandler(this,S.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,S.WARN,...e),this._logHandler(this,S.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,S.ERROR,...e),this._logHandler(this,S.ERROR,...e)}}("@firebase/app"),J="[DEFAULT]",Y={[W]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},X=new Map,Q=new Map;function Z(e,t){try{e.container.addComponent(t)}catch(n){G.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ee(e){const t=e.name;if(Q.has(t))return G.debug(`There were multiple attempts to register component ${t}.`),!1;Q.set(t,e);for(const t of X.values())Z(t,e);return!0}function te(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const ne=new h("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ie{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new v("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ne.create("app-deleted",{appName:this._name})}}function oe(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:J,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw ne.create("bad-app-name",{appName:String(o)});if(n||(n=l()),!n)throw ne.create("no-options");const s=X.get(o);if(s){if(m(n,s.options)&&m(i,s.config))return s;throw ne.create("duplicate-app",{appName:o})}const r=new k(o);for(const e of Q.values())r.addComponent(e);const a=new ie(n,i,r);return X.set(o,a),a}function se(e,t,n){var i;let o=null!==(i=Y[e])&&void 0!==i?i:e;n&&(o+=`-${n}`);const s=o.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const e=[`Unable to register library "${o}" with version "${t}":`];return s&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&r&&e.push("and"),r&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void G.warn(e.join(" "))}ee(new v(`${o}-version`,(()=>({library:o,version:t})),"VERSION"))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const re="firebase-heartbeat-database",ae=1,ce="firebase-heartbeat-store";let le=null;function de(){return le||(le=function(e,t,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(e,t),a=U(r);return i&&r.addEventListener("upgradeneeded",(e=>{i(U(r.result),e.oldVersion,e.newVersion,U(r.transaction),e)})),n&&r.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(re,ae,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ce)}}).catch((e=>{throw ne.create("idb-open",{originalErrorMessage:e.message})}))),le}async function ue(e,t){try{const n=(await de()).transaction(ce,"readwrite"),i=n.objectStore(ce);await i.put(t,pe(e)),await n.done}catch(e){if(e instanceof g)G.warn(e.message);else{const t=ne.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});G.warn(t.message)}}}function pe(e){return`${e.name}!${e.options.appId}`}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ge{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=he();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=he(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),me(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),me(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=s(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function he(){return(new Date).toISOString().substring(0,10)}class fe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!u()&&p().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await de();return await t.transaction(ce).objectStore(ce).get(pe(e))}catch(e){if(e instanceof g)G.warn(e.message);else{const t=ne.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});G.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function me(e){return s(JSON.stringify({version:2,heartbeats:e})).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var be;be="",ee(new v("platform-logger",(e=>new V(e)),"PRIVATE")),ee(new v("heartbeat",(e=>new ge(e)),"PRIVATE")),se(W,z,be),se(W,z,"esm2017"),se("fire-js","");
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
se("firebase","10.1.0","app");const we=(e,t)=>t.some((t=>e instanceof t));let ve,ye;const De=new WeakMap,ke=new WeakMap,Se=new WeakMap,Ie=new WeakMap,_e=new WeakMap;let Ce={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Se.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Te(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ee(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Pe(this),t),Te(De.get(this))}:function(...t){return Te(e.apply(Pe(this),t))}:function(t,...n){const i=e.call(Pe(this),t,...n);return Se.set(i,t.sort?t.sort():[t]),Te(i)}}function Oe(e){return"function"==typeof e?Ee(e):(e instanceof IDBTransaction&&function(e){if(ke.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));ke.set(e,t)}(e),we(e,ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ce):e)}function Te(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(Te(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&De.set(t,e)})).catch((()=>{})),_e.set(t,e),t}(e);if(Ie.has(e))return Ie.get(e);const t=Oe(e);return t!==e&&(Ie.set(e,t),_e.set(t,e)),t}const Pe=e=>_e.get(e);const Le=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Ae=new Map;function Be(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ae.get(t))return Ae.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=xe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!Le.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let r=s.store;return i&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),o&&s.done]))[0]};return Ae.set(t,s),s}!function(e){Ce=e(Ce)}((e=>({...e,get:(t,n,i)=>Be(t,n)||e.get(t,n,i),has:(t,n)=>!!Be(t,n)||e.has(t,n)})));const Ne="@firebase/installations",je="0.6.4",Re=1e4,Me=`w:${je}`,Ue="FIS_v2",$e="https://firebaseinstallations.googleapis.com/v1",He=36e5,Fe=new h("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(e){return e instanceof g&&e.code.includes("request-failed")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ke({projectId:e}){return`${$e}/projects/${e}/installations`}function Ve(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function We(e,t){const n=(await t.json()).error;return Fe.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ze({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ge(e,{refreshToken:t}){const n=ze(e);return n.append("Authorization",function(e){return`${Ue} ${e}`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)),n}async function Je(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ye(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Xe=/^[cdef][\w-]{21}$/,Qe="";function Ze(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e);return Xe.test(t)?t:Qe}catch(e){return Qe}}function et(e){return`${e.appName}!${e.appId}`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const tt=new Map;function nt(e,t){const n=et(e);it(n,t),function(e,t){const n=function(){!ot&&"BroadcastChannel"in self&&(ot=new BroadcastChannel("[Firebase] FID Change"),ot.onmessage=e=>{it(e.data.key,e.data.fid)});return ot}();n&&n.postMessage({key:e,fid:t});0===tt.size&&ot&&(ot.close(),ot=null)}(n,t)}function it(e,t){const n=tt.get(e);if(n)for(const e of n)e(t)}let ot=null;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const st="firebase-installations-database",rt=1,at="firebase-installations-store";let ct=null;function lt(){return ct||(ct=function(e,t,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(e,t),a=Te(r);return i&&r.addEventListener("upgradeneeded",(e=>{i(Te(r.result),e.oldVersion,e.newVersion,Te(r.transaction))})),n&&r.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}(st,rt,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(at)}})),ct}async function dt(e,t){const n=et(e),i=(await lt()).transaction(at,"readwrite"),o=i.objectStore(at),s=await o.get(n);return await o.put(t,n),await i.done,s&&s.fid===t.fid||nt(e,t.fid),t}async function ut(e){const t=et(e),n=(await lt()).transaction(at,"readwrite");await n.objectStore(at).delete(t),await n.done}async function pt(e,t){const n=et(e),i=(await lt()).transaction(at,"readwrite"),o=i.objectStore(at),s=await o.get(n),r=t(s);return void 0===r?await o.delete(n):await o.put(r,n),await i.done,!r||s&&s.fid===r.fid||nt(e,r.fid),r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function gt(e){let t;const n=await pt(e.appConfig,(n=>{const i=function(e){const t=e||{fid:Ze(),registrationStatus:0};return mt(t)}(n),o=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Fe.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Ke(e),o=ze(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const r={fid:n,authVersion:Ue,appId:e.appId,sdkVersion:Me},a={method:"POST",headers:o,body:JSON.stringify(r)},c=await Je((()=>fetch(i,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ve(e.authToken)}}throw await We("Create Installation",c)}(e,t);return dt(e.appConfig,n)}catch(n){throw qe(n)&&409===n.customData.serverCode?await ut(e.appConfig):await dt(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ht(e)}:{installationEntry:t}}(e,i);return t=o.registrationPromise,o.installationEntry}));return n.fid===Qe?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ht(e){let t=await ft(e.appConfig);for(;1===t.registrationStatus;)await Ye(100),t=await ft(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await gt(e);return n||t}return t}function ft(e){return pt(e,(e=>{if(!e)throw Fe.create("installation-not-found");return mt(e)}))}function mt(e){return 1===(t=e).registrationStatus&&t.registrationTime+Re<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}async function bt({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Ke(e)}/${t}/authTokens:generate`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,n),o=Ge(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const r={installation:{sdkVersion:Me,appId:e.appId}},a={method:"POST",headers:o,body:JSON.stringify(r)},c=await Je((()=>fetch(i,a)));if(c.ok){return Ve(await c.json())}throw await We("Generate Auth Token",c)}async function wt(e,t=!1){let n;const i=await pt(e.appConfig,(i=>{if(!yt(i))throw Fe.create("not-registered");const o=i.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+He}(e)}(o))return i;if(1===o.requestStatus)return n=async function(e,t){let n=await vt(e.appConfig);for(;1===n.authToken.requestStatus;)await Ye(100),n=await vt(e.appConfig);const i=n.authToken;return 0===i.requestStatus?wt(e,t):i}(e,t),i;{if(!navigator.onLine)throw Fe.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await bt(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await dt(e.appConfig,i),n}catch(n){if(!qe(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await dt(e.appConfig,n)}else await ut(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function vt(e){return pt(e,(e=>{if(!yt(e))throw Fe.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Re<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}))}function yt(e){return void 0!==e&&2===e.registrationStatus}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Dt(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await gt(e);t&&await t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n);return(await wt(n,t)).token}function kt(e){return Fe.create("missing-app-config-values",{valueName:e})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const St="installations",It=e=>{const t=te(e.getProvider("app").getImmediate(),St).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await gt(t);return i?i.catch(console.error):wt(t).catch(console.error),n.fid}(t),getToken:e=>Dt(t,e)}};ee(new v(St,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw kt("App Configuration");if(!e.name)throw kt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw kt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:te(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ee(new v("installations-internal",It,"PRIVATE")),se(Ne,je),se(Ne,je,"esm2017");const _t=(e,t)=>t.some((t=>e instanceof t));let Ct,Et;const Ot=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Lt=new WeakMap,xt=new WeakMap;let At={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Tt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Bt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Et||(Et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Rt(this),t),jt(Ot.get(this))}:function(...t){return jt(e.apply(Rt(this),t))}:function(t,...n){const i=e.call(Rt(this),t,...n);return Pt.set(i,t.sort?t.sort():[t]),jt(i)}}function Nt(e){return"function"==typeof e?Bt(e):(e instanceof IDBTransaction&&function(e){if(Tt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));Tt.set(e,t)}(e),_t(e,Ct||(Ct=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,At):e)}function jt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(jt(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ot.set(t,e)})).catch((()=>{})),xt.set(t,e),t}(e);if(Lt.has(e))return Lt.get(e);const t=Nt(e);return t!==e&&(Lt.set(e,t),xt.set(t,e)),t}const Rt=e=>xt.get(e);function Mt(e,t,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(e,t),a=jt(r);return i&&r.addEventListener("upgradeneeded",(e=>{i(jt(r.result),e.oldVersion,e.newVersion,jt(r.transaction))})),n&&r.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}function Ut(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),jt(n).then((()=>{}))}const $t=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],Ft=new Map;function qt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ft.get(t))return Ft.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=Ht.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!$t.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let r=s.store;return i&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),o&&s.done]))[0]};return Ft.set(t,s),s}!function(e){At=e(At)}((e=>({...e,get:(t,n,i)=>qt(t,n)||e.get(t,n,i),has:(t,n)=>!!qt(t,n)||e.has(t,n)})));
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Kt="/firebase-messaging-sw.js",Vt="/firebase-cloud-messaging-push-scope",Wt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zt="https://fcmregistrations.googleapis.com/v1",Gt="google.c.a.c_id",Jt="google.c.a.c_l",Yt="google.c.a.ts";var Xt,Qt;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Zt(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function en(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Xt||(Xt={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Qt||(Qt={}));const tn="fcm_token_details_db",nn=5,on="fcm_token_object_Store";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const sn="firebase-messaging-database",rn=1,an="firebase-messaging-store";let cn=null;function ln(){return cn||(cn=Mt(sn,rn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(an)}})),cn}async function dn(e){const t=pn(e),n=await ln(),i=await n.transaction(an).objectStore(an).get(t);if(i)return i;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(tn))return null}let t=null;return(await Mt(tn,nn,{upgrade:async(n,i,o,s)=>{var r;if(i<2)return;if(!n.objectStoreNames.contains(on))return;const a=s.objectStore(on),c=await a.index("fcmSenderId").get(e);if(await a.clear(),c)if(2===i){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(r=e.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:Zt(e.vapidKey)}}}else if(3===i){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Zt(e.auth),p256dh:Zt(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Zt(e.vapidKey)}}}else if(4===i){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Zt(e.auth),p256dh:Zt(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Zt(e.vapidKey)}}}}})).close(),await Ut(tn),await Ut("fcm_vapid_details_db"),await Ut("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await un(e,t),t}}async function un(e,t){const n=pn(e),i=(await ln()).transaction(an,"readwrite");return await i.objectStore(an).put(t,n),await i.done,t}function pn({appConfig:e}){return e.appId}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const gn=new h("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function hn(e,t){const n={method:"DELETE",headers:await mn(e)};try{const i=await fetch(`${fn(e.appConfig)}/${t}`,n),o=await i.json();if(o.error){const e=o.error.message;throw gn.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw gn.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function fn({projectId:e}){return`${zt}/projects/${e}/registrations`}async function mn({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function bn({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:t,p256dh:e}};return i!==Wt&&(o.web.applicationPubKey=i),o}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const wn=6048e5;async function vn(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:en(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Zt(t.getKey("auth")),p256dh:Zt(t.getKey("p256dh"))},i=await dn(e.firebaseDependencies);if(i){if(function(e,t){const n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,o=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&i&&o&&s}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(i.subscriptionOptions,n))return Date.now()>=i.createTime+wn?async function(e,t){try{const n=await async function(e,t){const n=await mn(e),i=bn(t.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=await fetch(`${fn(e.appConfig)}/${t.token}`,o);s=await n.json()}catch(e){throw gn.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw gn.create("token-update-failed",{errorInfo:e})}if(!s.token)throw gn.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await un(e.firebaseDependencies,i),n}catch(t){throw await async function(e){const t=await dn(e.firebaseDependencies);t&&(await hn(e.firebaseDependencies,t.token),await async function(e){const t=pn(e),n=(await ln()).transaction(an,"readwrite");await n.objectStore(an).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();if(n)return n.unsubscribe();return!0}(e),t}}(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await hn(e.firebaseDependencies,i.token)}catch(e){console.warn(e)}return yn(e.firebaseDependencies,n)}return yn(e.firebaseDependencies,n)}async function yn(e,t){const n=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */await async function(e,t){const n=await mn(e),i=bn(t),o={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const t=await fetch(fn(e.appConfig),o);s=await t.json()}catch(e){throw gn.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw gn.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw gn.create("token-subscribe-no-token");return s.token}(e,t),i={token:n,createTime:Date.now(),subscriptionOptions:t};return await un(e,i),i.token}function Dn(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const i=t.notification.body;i&&(e.notification.body=i);const o=t.notification.image;o&&(e.notification.image=o);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,i,o,s,r;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(o=null===(i=t.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==o?o:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const c=null===(r=t.fcmOptions)||void 0===r?void 0:r.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e),t}function kn(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sn(e){return gn.create("missing-app-config-values",{valueName:e})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
kn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),kn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class In{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(e){if(!e||!e.options)throw Sn("App Configuration Object");if(!e.name)throw Sn("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const e of t)if(!n[e])throw Sn(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function _n(e,t){if(t||e.swRegistration||await async function(e){try{e.swRegistration=await navigator.serviceWorker.register(Kt,{scope:Vt}),e.swRegistration.update().catch((()=>{}))}catch(e){throw gn.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw gn.create("invalid-sw-registration");e.swRegistration=t}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Cn(e,t){if(!navigator)throw gn.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw gn.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Wt)}(e,null==t?void 0:t.vapidKey),await _n(e,null==t?void 0:t.serviceWorkerRegistration),vn(e)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function En(e,t,n){const i=function(e){switch(e){case Qt.NOTIFICATION_CLICKED:return"notification_open";case Qt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[Gt],message_name:n[Jt],message_time:n[Yt],message_device_time:Math.floor(Date.now()/1e3)})}async function On(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Qt.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Dn(n)):e.onMessageHandler.next(Dn(n)));const i=n.data;var o;"object"==typeof(o=i)&&o&&Gt in o&&"1"===i["google.c.a.e"]&&await En(e,n.messageType,i)}const Tn="@firebase/messaging",Pn="0.12.4",Ln=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Cn(t,e)}};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function xn(){try{await p()}catch(e){return!1}return"undefined"!=typeof window&&u()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function An(e=function(e=J){const t=X.get(e);if(!t&&e===J&&l())return oe();if(!t)throw ne.create("no-app",{appName:e});return t}()){return xn().then((e=>{if(!e)throw gn.create("unsupported-browser")}),(e=>{throw gn.create("indexed-db-unsupported")})),te(w(e),"messaging").getImmediate()}ee(new v("messaging",(e=>{const t=new In(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>On(t,e))),t}),"PUBLIC")),ee(new v("messaging-internal",Ln,"PRIVATE")),se(Tn,Pn),se(Tn,Pn,"esm2017");class Bn{config;constructor(e){this.config=e}async initialize(e){const t=An(oe(this.config)),n=await navigator.serviceWorker.register(e),i=await async function(e,t){return Cn(e=w(e),t)}(t,{vapidKey:window.coins2bData.vapidconfig.vapid,serviceWorkerRegistration:n});return i}}class Nn{async postRequest(e,t,n){try{const i=await fetch(e,{method:"POST",body:t,mode:"cors"});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);n(await i.text())}catch(e){}}}class jn{storage;created=!1;constructor(){this.storage=new e}openDatabase(e,t){return new Promise(((n,i)=>{const o=indexedDB.open(e);o.onerror=()=>{i(new Error("Failed to open database"))},o.onsuccess=()=>{const e=o.result;n(e)},o.onupgradeneeded=e=>{const n=o.result;n.objectStoreNames.contains(t)||n.createObjectStore(t,{keyPath:"id"})}}))}saveFirebaseConfig=(e,t)=>{const n=JSON.parse(JSON.stringify(e));n.token=t;const i="coins_fcm_store";let o=indexedDB.open("coins_fcm");o.onupgradeneeded=e=>{const t=e.target.result;try{t.createObjectStore(i,{keyPath:"messagingSenderId"}),this.created=!0}catch(e){}},o.onerror=e=>{},o.onsuccess=e=>{const t=e.target.result;try{t.createObjectStore(i,{keyPath:"messagingSenderId"}),this.created=!0}catch(e){}var o=t.transaction(i,"readwrite"),s=o.objectStore(i);s.clear().onsuccess=e=>{s.put(n).onsuccess=()=>{},o.oncomplete=()=>{},t.close()}}};async _getcoinsid(){const e=window.document,t=t=>{let n=new Date("12/31/2037");e.cookie="btoken="+t+"; expires="+n.toUTCString()+"; path=/",this.storage.set("coins_btoken",t)},n=e.cookie.match(new RegExp("btoken=([^;]*);*"));if(n&&n[1]){const e=n[1];return t(e),e}if(this.storage.get("coins_btoken")){const e=this.storage.get("coins_btoken");if(null!==e)return t(e),e}try{const e="coins_fcm",n="coins_fcm_store",i=indexedDB.open(e);return new Promise(((e,o)=>{i.onsuccess=i=>{const s=i.target.result;if(s){var r=s.transaction(n,"readonly").objectStore(n).openCursor();r.onsuccess=n=>{const i=n.target.result;if(i){i.continue();let n=i.value.token;t(n),e(n)}},r.onerror=e=>{o()}}else o()}}))}catch(e){return Promise.reject()}}async _existsDatabase(e,t){return new Promise(((n,i)=>{var o=indexedDB.open(e),s=!0;o.onsuccess=i=>{var o=i.target.result;o&&!o.objectStoreNames.contains(t)&&(s=!1),o&&o.close(),s||this.created||indexedDB.deleteDatabase(e),n(s)},o.onupgradeneeded=function(){s=!1},o.onerror=i}))}}class Rn{config;coins2b;storage;event;CoinsOptinDialogOption=window.CoinsOptinDialogOption;CoinsBlockDialogOption=window.CoinsBlockDialogOption;constructor(e,t,n,i){this.config=e,this.coins2b=t,this.storage=n,this.event=i}useUnblockingRequest(){return"on"===this.config.unblockingRequest}useOptinDialog(){return"on"===this.config.optinDialog}useBlockDialog(){return"on"===this.config.blockDialog}useIosDialog(){return"on"===this.config.iosDialog}skipPreOptinDialog=()=>{if(""===this.config.medium)return!1;return new URL(location.href).searchParams.get("utm_medium")===this.config.medium};needToShowPreOptinDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let e=this.storage.get("next_optin_check_time");const t=new Date;return e=e?new Date(Date.parse(e)):t,t>=e};needToShowUnblocklDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let e=this.storage.get("next_block_check_time");const t=new Date;return e=e?new Date(Date.parse(e)):t,t>=e};isOptinDialogScriptLoaded(){return void 0!==this.CoinsOptinDialogOption&&null!==this.CoinsOptinDialogOption}isCoinsBlockDialogOptionLoaded(){return void 0!==this.CoinsBlockDialogOption&&null!==this.CoinsBlockDialogOption}appendDialogStyle=function(){let e=document.getElementById("coins-dialog-style");e||(e='\n<style>\n@keyframes CoinsShowAnimation {\n    0% {\n        opacity: 0;\n        transform: translateY(100px);\n    }\n    100% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n@keyframes CoinsHideAnimation {\n    0% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n    100% {\n        opacity: 0;\n        transform: translateY(100px);\n    }\n}\n\n.coins-close-button {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    cursor: pointer;\n    border-radius: 50%;\n    right: 4px;\n    top: 4px;\n}\n\n.coins-close-button span::before,\n.coins-close-button span::after {\n    display: block;\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 84%;\n    height: 10%;\n    margin: -8% 0 0 -42%;\n    background: gray;\n}\n\n.coins-close-button span::before {\n    transform: rotate(-45deg);\n}\n\n.coins-close-button span::after {\n    transform: rotate(45deg);\n}\n\n.coins-optin-dialog {\n    z-index: 9999;\n    position: fixed;\n    background-color: white;\n    width: 500px;\n    bottom: 10px;\n    right: 10px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    animation-name: CoinsShowAnimation;\n    animation-duration: 0.5s;\n}\n\n.coins-optin-dialog:hover {\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n      \n@media screen and (max-width: 600px) {\n    .coins-optin-dialog {\n        width: 100%;\n        bottom: 0;\n        left: 0;\n    }\n}\n\n.coins-optin-dialog-icon {\n    display: inline-block;\n    vertical-align: top;\n}\n\n.coins-optin-dialog-text-box {\n    display: inline-block;\n    word-wrap: break-word;\n    vertical-align: top;\n    max-width: 70%;\n}\n\n.coins-optin-dialog-icon > img {\n    width: 84px;\n    height: 84px;\n}\n\n.coins-optin-dialog-text-box > span {\n    display: block;\n    margin-top: 10px;\n    margin-right: 10px;\n    margin-bottom: 10px;\n    font-size: medium;\n    color: gray;\n    width: 380px;\n}\n\n.coins-optin-dialog-button-box {\n    text-align:right;\n    display: inline-block;\n    min-width: 110%;  \n    box-sizing: border-box;\n}\n\n@media screen and (max-width: 600px) {\n    .coins-optin-dialog-text-box > span {\n        width: auto;\n        font-size: small;\n        margin-bottom: 0px;\n        margin-top: 4px;\n    }\n\n    .coins-optin-dialog-button-box {\n        min-width: 70vw;\n    }\n}\n\n.coins-optin-dialog-button-box > button {\n    display: inline-block;\n    position: relative;\n    bottom: 0px;\n    border: none;\n    cursor: pointer;\n    outline: none;\n    appearance: none;\n}\n\n.coins-optin-dialog-button {\n    background-color: rgba(0, 0, 0, 0.05);\n    border-radius: 4px;\n    color: gray;\n    padding: 4px;\n    min-width: 80px;\n    min-height: 28px;\n    font-size: small;\n    margin-left: 10px;\n}\n\n.coins-optin-dialog-button:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\n.coins-optin-dialog-text-link {\n    display: inline-block;\n    border-radius: 4px;\n    color: #0073cf;\n    padding: 4px;\n    min-width: 80px;\n    min-height: 28px;\n    font-size: small;\n    margin-top: 10px;\n    margin-left: 10px;\n}\n</style>',document.body.insertAdjacentHTML("beforeend",e))};appendUnblockProcessStyle=function(){let e=document.getElementById("coins-unblock-process-style");e||(e='\n<style data-styled="coins-unblock-process-style">\n.coins-unblock-process-toggle {\n    background: #666;\n    width: 100px;\n    height: 10px;\n    margin: 20px auto;\n    cursor: pointer;\n}\n\n.coins-unblock-process {\n    background: #eee;\n    border: solid 1px #eee;\n    display: block;\n}\n\n.coins-unblock-process.is-hidden {\n    display: none;\n}\n\n.coins-close-button {\n    bottom: 56px;\n    top: auto;\n}\n\n.coins-unblock-process > ol {\n    color: #000;\n    padding-inline-start: 40px;\n    list-style: decimal;\n    margin-bottom: 20px;\n    font-family: system-ui, sans-serif;\n}\n\n.coins-unblock-process > ol > li {\n    font-size: smaller;\n    margin-bottom: 5px;\n    list-style-position: unset;\n    line-height: 1.5;\n}\n\n.coins-unblock-process > ol > li:nth-last-child(1) {\n    margin-bottom: 0;\n}\n\n#coins-unblock-process-hide-btn {\n    position: relative;\n    width: 100%;\n    overflow: visible;\n    display: block;\n    cursor: pointer;\n    padding: 10px 50% 30px;\n}\n\n#coins-unblock-process-hide-btn > svg {\n    width: 21px;\n    height: 4px;\n    position: absolute;\n    overflow: visible;\n    transform-origin: center;\n}\n\n#coins-unblock-process-hide-btn > svg:nth-child(1) {\n    transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,298,414) rotate(45deg);\n}\n\n#coins-unblock-process-hide-btn > svg:nth-child(2) {\n    transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,310,414) rotate(135deg);\n}\n\n#coins-unblock-process-hide-btn > svg > rect {\n    fill: rgba(102,102,102,1);\n}\n</style>',document.body.insertAdjacentHTML("beforeend",e))};optinPositiveAction=()=>{this.config.iphone||this.config.ipad?this.isPermissionDefault()&&Notification.requestPermission().then((e=>{if(this.storage.keyExists("internalPermission")||this.storage.set("internalPermission","first"),"granted"==e)this.storage.delete("internalPermission"),this.storage.set("internalPermissionGranted","true"),this.coins2b._newRequestPermission();else{const e=this.storage.get("internalPermission");"first"==e?this.storage.set("internalPermission","default"):"default"==e&&this.storage.set("internalPermission","denied")}})):this.coins2b._newRequestPermission(),this.hideOptinDialog(),this.event.publish(this.event.CLICK_PREOPTIN_ACTION,null)};optinNegativeAction=()=>{this.saveCheckDate(),this.hideOptinDialog(),this.event.publish(this.event.CLICK_PREOPTIN_CLOSE,null)};hideOptinDialog=function(){const e=document.getElementsByClassName("coins-optin-dialog");if(e.length>0){let t=e[0];t.style.animationName="CoinsHideAnimation",setTimeout((function(){t.remove()}),400)}};saveCheckDate=()=>{var e=this.config.DEFAULT_OPTIN_CHECK_INTERVAL;this.isOptinDialogScriptLoaded()&&(e=this.CoinsOptinDialogOption.interval||this.config.DEFAULT_OPTIN_CHECK_INTERVAL);var t=new Date;t.setSeconds(t.getSeconds()+e),this.storage.set("next_optin_check_time",t.toString())};saveBlockDate=()=>{var e=this.config.DEFAULT_BLOCK_CHECK_INTERVAL;this.isCoinsBlockDialogOptionLoaded()&&(e=this.CoinsBlockDialogOption.interval||this.config.DEFAULT_BLOCK_CHECK_INTERVAL);var t=new Date;t.setSeconds(t.getSeconds()+e),this.storage.set("next_block_check_time",t.toString())};toggleUnblockProcess=function(){const e=document.querySelector(".coins-unblock-process");e&&e.classList.toggle("is-hidden")};isPermissionGranted=function(){return"Notification"in window&&"granted"===Notification.permission};isPermissionDenied=function(){return"Notification"in window&&"denied"===Notification.permission};isPermissionDefault=function(){return"Notification"in window&&"default"===Notification.permission}}const Mn=(e,t,n)=>`\n<div class="coins-optin-dialog">\n   <div class="coins-optin-dialog-icon">\n     <img style="vertical-align: top !important;" src="${e}">\n   </div>\n   <div class="coins-optin-dialog-text-box">\n     <div class="coins-close-button"><span></span></div>\n     <span>${t}</span>\n    <div class="coins-optin-dialog-button-box">\n      <button class="coins-optin-dialog-button">${n}</button>\n    </div>\n  </div>\n</div>\n`;async function Un(e,t){let n=e.DEFAULT_DIALOG_ICON,i="このサイトからの通知を設定しますか?",o="設定する";t.isOptinDialogScriptLoaded()&&(n=t.CoinsOptinDialogOption.icon||n,i=t.CoinsOptinDialogOption.message||i,o=t.CoinsOptinDialogOption.button||o),t.appendDialogStyle(),document.body.insertAdjacentHTML("beforeend",Mn(n,i,o));document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.optinPositiveAction);document.querySelector(".coins-close-button").addEventListener("click",t.optinNegativeAction),t.event.publish(t.event.SHOW_PREOPTIN,null)}const $n=(e,t,n)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li>左上の鍵マークをタップ</li>\n            <li>「権限」をタップ</li>\n            <li>「通知」をタップ</li>\n            <li>「ブロック」を「許可」に切り替え</li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${e}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${n}</button>\n        </div>\n    </div>\n</div>\n`;const Hn=(e,t,n,i)=>`\n<div class="coins-optin-dialog">\n    <div class="coins-optin-dialog-icon">\n        <img style="vertical-align: top !important;" src="${e}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <a id="coins-optin-unblock-link" target="_blank" href="${n}" class="coins-optin-dialog-text-link">${i}</a>\n        </div>\n    </div>\n</div>\n`;function Fn(e,t,n,i,o){n.isPermissionDefault()?n.useOptinDialog()&&n.needToShowPreOptinDialog()?Un(e,n):t._newRequestPermission():n.isPermissionDenied()&&n.needToShowUnblocklDialog()&&async function(e,t){let n=e.DEFAULT_DIALOG_ICON,i="このサイトからの通知を設定しますか?",o="設定する";t.isOptinDialogScriptLoaded()&&(n=t.CoinsOptinDialogOption.icon||n,i=t.CoinsOptinDialogOption.message||i,o=t.CoinsOptinDialogOption.button||o),t.appendDialogStyle(),t.appendUnblockProcessStyle(),document.body.insertAdjacentHTML("beforeend",$n(n,i,o)),document.querySelector("#coins-close-button").addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1),document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockProcess),document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockProcess)}(e,n)}function qn(e,t,n,i,o){i.get("coins_initialized")||o.publish(o.AUTO_BLOCK),n.useBlockDialog()&&n.needToShowUnblocklDialog()&&async function(e,t){let n=e.DEFAULT_DIALOG_ICON,i=e.DEFAULT_BLOCK_URL,o="このサイトからの通知を設定しますか?",s="設定方法を確認";t.isCoinsBlockDialogOptionLoaded()&&(n=t.CoinsBlockDialogOption.icon||n,i=t.CoinsBlockDialogOption.link||i,o=t.CoinsBlockDialogOption.message||o,s=t.CoinsBlockDialogOption.text||s),t.appendDialogStyle(),document.body.insertAdjacentHTML("beforeend",Hn(n,i,o,s)),document.querySelector("#coins-close-button").addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1),document.querySelector("#coins-optin-unblock-link").addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1)}(e,n),n.useUnblockingRequest()&&Fn(e,t,n)}function Kn(n,i){const o=new e,s=new t,r=new Rn(n,i,o,s);r.isPermissionGranted()?function(e,t){e._newRequestPermission()}(i):r.isPermissionDenied()?qn(n,i,r,o,s):r.useOptinDialog()?function(e,t){e.needToShowPreOptinDialog()&&Un(t,e)}(r,n):i._newRequestPermission()}const Vn=(e,t,n,i)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li>設定アプリ起動</li>\n            <li>「通知」をタップ</li>\n            <li>「${i}」をタップ</li>\n            <li>通知を許可をON(緑色の状態)</li>\n            <li style="list-style-type: none; margin-left: -20px;">※ 設定アプリに${i}が無い場合はアプリを再インストールし、通知許可設定の操作をお願いします\n            </li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${e}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${n}</button>\n        </div>\n    </div>\n</div>\n`;async function Wn(e,t){let n=e.DEFAULT_DIALOG_ICON,i="このサイトからの通知を設定しますか?",o="設定する";t.isOptinDialogScriptLoaded()&&(n=t.CoinsOptinDialogOption.icon||n,i=t.CoinsOptinDialogOption.message||i,o=t.CoinsOptinDialogOption.button||o);let s="本アプリ";!function(){const t=document.querySelector('link[rel="manifest"]');if(e.localManifestFileUrl=t?t.href:"",e.localManifestFileUrl){const t=new URL(e.localManifestFileUrl),n=new URL(window.location.href);t.origin!=n.origin&&(e.localManifestFileUrl="")}}(),e.localManifestFileUrl&&e.localManifestFileUrl.length>0&&(s=await async function(){try{if(e.localManifestFileUrl){const t=await fetch(e.localManifestFileUrl);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}}catch(e){}}().then((e=>e.name?e.name:s)).catch((e=>{}))),t.appendDialogStyle(),t.appendUnblockProcessStyle(),document.body.insertAdjacentHTML("beforeend",Vn(n,i,o,s));document.querySelector("#coins-close-button").addEventListener("click",(function(){t.saveCheckDate(),t.hideOptinDialog()}),!1);document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockProcess);document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockProcess)}function zn(n,i){n.iphone||n.ipad?function(n,i){const o=new e,s=new t,r=new Rn(n,i,o,s),a=o.get("internalPermission"),c=o.get("internalPermissionGranted");if(r.isPermissionGranted())o.delete("internalPermission"),o.set("internalPermissionGranted","true"),i._newRequestPermission();else if(r.useIosDialog()){if(r.skipPreOptinDialog())return;"denied"==a&&r.needToShowPreOptinDialog()||c&&r.isPermissionDefault()&&r.useUnblockingRequest()?Wn(n,r):"denied"!=a&&r.isPermissionDefault()&&r.needToShowPreOptinDialog()&&Un(n,r)}r.useUnblockingRequest()&&r.isPermissionDenied()&&r.needToShowPreOptinDialog()&&Wn(n,r)}(n,i):Kn(n,i)}const Gn={webHost:"api.webpush.jp",webPath:"/coins_webapi",token:void 0,sw:"/serviceworker.js",optinDialog:"off",blockDialog:"off",unblockingRequest:"off",iosDialog:"off",medium:"",ua:navigator.userAgent.toLowerCase(),scriptIsReady:!1,DEFAULT_DIALOG_ICON:"https://cdn.webpush.jp/logo-coins.png",DEFAULT_BLOCK_URL:"https://webpush.jp/reoptin/",DEFAULT_OPTIN_CHECK_INTERVAL:86400,DEFAULT_BLOCK_CHECK_INTERVAL:86400,localManifestFileUrl:"",registration:void 0};Gn.webHost&&Gn.webPath&&(Gn.server=`${document.location.protocol}//${Gn.webHost}${Gn.webPath}`,Gn.registerUrl=`${Gn.server}/fapi/registrationid`,Gn.fcmconfUrl=`${Gn.server}/fcm/setting/`,Gn.usertagUrl=`${Gn.server}/fapi/usertag`,Gn.optinEventUrl=`${Gn.server}/fapi/optin_event`),Gn.ua&&(Gn.firefox=Gn.ua.indexOf("firefox")>-1,Gn.chrome=Gn.ua.indexOf("chrome")>-1,Gn.edge=Gn.ua.indexOf("edge")>-1,Gn.iphone=Gn.ua.indexOf("iphone")>-1,Gn.ipad=Gn.ua.indexOf("ipad")>-1||Gn.ua.indexOf("macintosh")>-1&&"ontouchend"in document);class Jn{webHost;webPath;IDBStorage;isProcessing=!1;retryCount=0;constructor(e){this.webHost=e.webHost,this.webPath=e.webPath,this.IDBStorage=new jn}request(e,t,n,i){return i=i||{Accept:"application/json","Content-Type":"application/json"},fetch(e,{method:t,headers:i,body:n})}isLatestSdkVersion(){return new Promise(((e,t)=>{const n=indexedDB.open("coins_fcm");n.onupgradeneeded=t=>{t.target.transaction?.abort(),e(!1)},n.onsuccess=()=>{e(!0)},n.onerror=e=>{t()}}))}fetchToken(){return new Promise(((e,t)=>{document.cookie.indexOf("btoken")<0?t():this.isLatestSdkVersion().then((n=>{if(n){const n="coins_fcm",i="coins_fcm_store";this.IDBStorage.openDatabase(n,i).then((n=>{const o=n.transaction(i,"readonly").objectStore(i).openCursor();o.onsuccess=t=>{const n=t.target.result;if(n){n.continue();const t={registrationId:n.value.token,senderId:n.value.messagingSenderId};e(t)}},o.onerror=()=>{t()}})).catch((()=>t()))}else{const n=indexedDB.open("fcm_token_details_db");n.onsuccess=n=>{const i=n.target.result;try{const n=i.transaction("fcm_token_object_Store"),o=n.objectStore("fcm_token_object_Store").openCursor();o.onsuccess=t=>{const n=t.target.result;if(n){const t={registrationId:n.value.fcmToken,senderId:n.value.fcmSenderId};e(t)}},o.onerror=()=>{t()}}catch(e){t()}i.close()},n.onerror=()=>{t()}}}))}))}createUrl(e){return`${window.document.location.protocol}//${this.webHost}${this.webPath}${e}`}tokenIsReady(){const t=new e;return t.get("senderId")&&t.get("registrationId")}canRetry(){return this.retryCount<Yn}_addCart(e,t,n){const i=this.createUrl("/fapi/addcart"),o={sender_id:e.senderId,registration_id:e.registrationId,cart_option:t.option||null,session_id:t.session_id||null};this.isProcessing=!0,this.request(i,"POST",JSON.stringify(o)).then((e=>{this.isProcessing=!1,n(e)})).catch((e=>{this.isProcessing=!1,n(e)}))}_clearCart(e,t){const n=this.createUrl("/fapi/clearcart"),i={sender_id:e.senderId,registration_id:e.registrationId};this.isProcessing=!0,this.request(n,"POST",JSON.stringify(i)).then((e=>{this.isProcessing=!1,t(e)})).catch((e=>{this.isProcessing=!1,t(e)}))}addCart(e,t){this.isProcessing||(e=e||{},t=t||function(){},this.fetchToken().then((n=>{this._addCart(n,e,t)})).catch((()=>{window.setTimeout((()=>{this.addCart(e,t),this.retryCount++}),Xn)})))}clearCart(e){this.isProcessing||(e=e||function(){},this.fetchToken().then((t=>{this._clearCart(t,e)})).catch((()=>{window.setTimeout((()=>{this.clearCart(e),this.retryCount++}),Xn)})))}}const Yn=60,Xn=1e3;window.coins2b=new class{config;storage;event;communication;IDBStorage;constructor(n){this.config=n,this.storage=new e,this.event=new t,this.communication=new Nn,this.IDBStorage=new jn,this.initialize()}initialize(){const e=this.config.optinEventUrl;window.addEventListener(this.event.AUTO_BLOCK,(()=>{const t={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"auto_block",url:location.href};e&&this.communication.postRequest(e,JSON.stringify(t),null)})),this.event.dispPromptRidSp()}async setup(){if(!("Notification"in window))return;const e=document.getElementsByTagName("script");for(let t=0;t<e.length;++t)if(this.config.token=e[t].dataset.bptoken,this.config.token){e[t].dataset.sw&&(this.config.sw=e[t].dataset.sw),e[t].dataset.optindialog&&(this.config.optinDialog=e[t].dataset.optindialog),e[t].dataset.blockdialog&&(this.config.blockDialog=e[t].dataset.blockdialog),e[t].dataset.unblockingrequest&&(this.config.unblockingRequest=e[t].dataset.unblockingrequest),e[t].dataset.iosdialog&&(this.config.iosDialog=e[t].dataset.iosdialog),e[t].dataset.medium&&(this.config.medium=e[t].dataset.medium);break}if(!this.config.token)return;if((50==this.config.chromev||51==this.config.chromev)&&this.config.sw){const e=document.createElement("link");e.rel="manifest",e.href=this.config.sw.replace(/^(.*\/).*$/g,"$1")+"manifest.json?t="+(new Date).getTime(),document.head.appendChild(e)}await(()=>new Promise((e=>{if(this.config.fcmconfUrl&&this.config.token){!function(e,t){const n=document.createElement("script");n.src=e,n.onload=function(){t()},document.body.appendChild(n)}(this.config.fcmconfUrl+this.config.token,(()=>e()))}})))(),await zn(this.config,this),this.imFirstScriptAppend(),this.storage.set("coins_initialized","true")}_newRequestPermission=async()=>{const e="default"===Notification.permission;if(!e||!window.coins2bData||"1"!=window.coins2bData.optinDisable)try{if(!this.config.sw)return;const n=new Bn(window.coins2bData.fcmconfig),i=(await navigator.serviceWorker.register(this.config.sw),await n.initialize(this.config.sw));if(!i)return;if(this.IDBStorage.saveFirebaseConfig(window.coins2bData.fcmconfig,i),e){let e={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"granted",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(e),null)}let o=this.getOldRegisterid();if(i==o){var t=new Date("12/31/2037");return document.cookie="btoken="+i+"; expires="+t.toUTCString()+"; path=/",this.storage.setLocalStorage("coins_btoken",i),this.setRegistration(i,""),void("1"==window.coins2bData.useImUid&&this.imScriptAppend(i))}if(i&&o){let e={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"changed",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(e),null)}const s={sender_id:window.coins2bData.fcmconfig.messagingSenderId,registration_id:i,old_registration_id:o,uuid:""},r=this.getcookie("uuid");r&&(s.uuid=r),this.config.registerUrl&&this.communication.postRequest(this.config.registerUrl,JSON.stringify(s),(()=>{var e=new Date("12/31/2037");document.cookie="btoken="+i+"; expires="+e.toUTCString()+"; path=/",this.storage.setLocalStorage("coins_btoken",i),this.setRegistration(i,o),"1"==window.coins2bData.useImUid&&this.imScriptAppend(i),setTimeout((function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(JSON.stringify({type:"optin",url:location.href}))}),500)}))}catch(t){if(e){let e={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"denied",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(e),null)}if("granted"!==Notification.permission)return void this.storage.setLocalStorage("coins_btoken",null)}};getOldRegisterid=()=>{const e=this.storage.get("coins_btoken");return e||this.getcookie("btoken")};getcookie=e=>{var t="",n=document.cookie;if(""==n)return t;for(var i=n.split("; "),o=0;o<i.length;o++){var s=i[o].split("=");if(s[0]==e){t=decodeURIComponent(s[1]);break}}return t};setsegment=e=>{this.getcoinsid((t=>{const n={sender_id:window.coins2bData.fcmconfig.messagingSenderId,registration_id:t,sender_string:e};this.config.registerUrl&&this.communication.postRequest(this.config.registerUrl,JSON.stringify(n),(function(){}))}))};getcoinsidTimer=null;getcoinsCallbacks=[];getcoinsid=(e,t=!1)=>{this.getcoinsCallbacks.includes(e)||this.getcoinsCallbacks.push(e),window.coins2bData&&window.coins2bData.hasOwnProperty("fcmconfig")&&this.IDBStorage._existsDatabase("coins_fcm","coins_fcm_store").then((e=>{e&&this.IDBStorage._getcoinsid().then((e=>{void 0!==e&&(this.getcoinsCallbacks.forEach((t=>t(e))),this.getcoinsCallbacks=[],this.getcoinsidTimer&&(clearTimeout(this.getcoinsidTimer),this.getcoinsidTimer=null))}))})),t||null!=this.getcoinsidTimer||(this.getcoinsidTimer=setInterval((()=>{this.getcoinsid(e,!0)}),500))};imFirstScriptAppend=()=>{if(window.coins2bData.useImUid){let e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://dmp.im-apps.net/js/1014416/0001/itm.js";let t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}};imScriptAppend=async e=>new Promise((t=>{let n="https://b6.im-apps.net/1012530/map/"+e,i=new XMLHttpRequest;i.open("POST",n),i.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),i.withCredentials=!0,i.send(null),t()}));setRegistration=(e,t)=>{this.config.registration={id:e,old_id:t}}}(Gn),void 0===window.coinsCart&&function(e,t){e.coinsCart=new Jn(Gn)}(window),async function(){await window.coins2b.setup()}()}();
